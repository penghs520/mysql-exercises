# 第一阶段：基础查询练习

## 练习说明
- 所有查询都在 `study_db` 数据库中执行
- 建议先自己完成，再查看参考答案
- 注意观察查询结果，理解SQL语义

---

## 1. SELECT 基础查询

### 1.1 查询所有用户信息
```sql
-- 查询users表的所有字段和所有记录
-- 思考：如何限制只查看前10条？
```

### 1.2 查询指定列
```sql
-- 只查询用户的 id, username, email 三个字段
-- 显示前20条记录
```

### 1.3 使用别名
```sql
-- 查询商品信息，将字段名改为中文显示
-- id -> 商品编号, name -> 商品名称, price -> 售价
```

---

## 2. WHERE 条件过滤

### 2.1 等值查询
```sql
-- 查询状态为"正常"(status=1)的用户
-- 显示用户名、邮箱、手机号
```

### 2.2 比较运算符
```sql
-- 查询价格大于500元的商品
-- 显示商品名称、价格、库存
```

### 2.3 范围查询
```sql
-- 查询价格在100-500元之间的商品（包含100和500）
-- 使用 BETWEEN...AND
```

### 2.4 IN 查询
```sql
-- 查询订单状态为"已支付"(1)或"已发货"(2)的订单
-- 显示订单号、用户ID、订单状态、订单金额
```

### 2.5 模糊查询
```sql
-- 查询商品名称中包含"经典款"的所有商品
-- 使用 LIKE 关键字
```

### 2.6 NULL 值查询
```sql
-- 查询没有填写手机号的用户（phone 为 NULL）
-- 显示用户名和邮箱
```

---

## 3. 逻辑运算符

### 3.1 AND 多条件
```sql
-- 查询状态为正常，且价格大于1000的商品
-- 显示商品名称、价格、库存、状态
```

### 3.2 OR 或条件
```sql
-- 查询库存小于10 或 销量大于5000的商品
-- 显示商品名称、库存、销量
```

### 3.3 NOT 否定
```sql
-- 查询状态不是"待支付"(0)的订单
-- 显示订单号、状态、订单金额
```

### 3.4 复合条件
```sql
-- 查询符合以下条件的商品：
-- (价格<100 或 价格>1000) 并且 库存>50
```

---

## 4. ORDER BY 排序

### 4.1 单字段升序
```sql
-- 查询所有商品，按价格从低到高排序
-- 显示商品名称、价格
```

### 4.2 单字段降序
```sql
-- 查询所有商品，按销量从高到低排序
-- 显示商品名称、销量、价格
-- 只显示前10名
```

### 4.3 多字段排序
```sql
-- 查询所有订单，先按状态升序，再按创建时间降序
-- 显示订单号、状态、订单金额、创建时间
```

---

## 5. LIMIT 分页

### 5.1 限制记录数
```sql
-- 查询最新注册的20个用户
-- 按注册时间降序排列
```

### 5.2 分页查询
```sql
-- 分页查询商品列表，每页显示50条
-- 查询第2页的数据（即第51-100条）
```

### 5.3 TOP N 查询
```sql
-- 查询销量最高的5个商品
-- 显示商品名称、销量、价格
```

---

## 6. DISTINCT 去重

### 6.1 单字段去重
```sql
-- 查询所有用户所在的不同省份
-- 从 user_addresses 表查询
```

### 6.2 多字段去重
```sql
-- 查询所有订单使用过的支付方式
-- 从 orders 表查询，去除 NULL 值
```

---

## 7. 聚合函数基础

### 7.1 COUNT 计数
```sql
-- 统计总共有多少个用户
```

### 7.2 SUM 求和
```sql
-- 统计所有已完成订单(status=3)的总金额
```

### 7.3 AVG 平均值
```sql
-- 计算所有商品的平均价格
-- 保留2位小数
```

### 7.4 MAX/MIN 最值
```sql
-- 查询价格最高和最低的商品价格
-- 使用一条SQL完成
```

---

## 8. 日期时间函数

### 8.1 日期格式化
```sql
-- 查询最近注册的10个用户
-- 将创建时间格式化为 'YYYY-MM-DD HH:mm:ss'
```

### 8.2 日期计算
```sql
-- 查询最近30天内创建的订单数量
-- 使用 DATE_SUB 或 INTERVAL
```

### 8.3 提取日期部分
```sql
-- 统计每个月的注册用户数
-- 提取年月，如 '2024-01'
```

---

## 9. 字符串函数

### 9.1 字符串拼接
```sql
-- 查询用户信息，将username和email拼接显示
-- 格式：'用户名 (邮箱)'
```

### 9.2 字符串截取
```sql
-- 查询所有用户的手机号，隐藏中间4位
-- 格式：138****1234
```

### 9.3 大小写转换
```sql
-- 将所有商品名称转换为大写显示
```

---

## 10. 综合练习

### 10.1 商品列表查询
```sql
-- 查询满足以下条件的商品：
-- 1. 状态为上架(status=1)
-- 2. 价格在50-500之间
-- 3. 库存大于0
-- 4. 按销量降序排列
-- 5. 只显示前20条
-- 显示：商品名称、价格、库存、销量
```

### 10.2 用户统计
```sql
-- 统计不同状态的用户数量
-- 显示：状态值、用户数量
-- 提示：这题需要用到 GROUP BY，可以尝试使用
```

### 10.3 订单分析
```sql
-- 查询订单金额超过平均订单金额的订单
-- 显示订单号、订单金额、创建时间
-- 按订单金额降序排列
-- 提示：需要使用子查询
```

---

## 学习检查点

完成所有练习后，你应该能够：
- [ ] 熟练编写 SELECT 查询语句
- [ ] 使用各种 WHERE 条件过滤数据
- [ ] 掌握 ORDER BY 和 LIMIT 分页
- [ ] 理解 DISTINCT 去重原理
- [ ] 使用常见的聚合函数
- [ ] 处理日期时间和字符串
- [ ] 组合多个条件编写复杂查询

**下一步**: 完成后查看 `solutions/01-基础查询.md` 对照答案，然后进入第二阶段学习。
